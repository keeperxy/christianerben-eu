---
description: Auto-activation for GitHub work; #<number> resolves to issue/PR in the current repo unless owner/repo is given. Prefer github-mcp; fall back to gh.
alwaysApply: true
---

# ğŸ§­ Activation (SelbstprÃ¼fung)
Diese Rule **gilt nur**, wenn mindestens eines zutrifft:
- User-Text enthÃ¤lt eines der WÃ¶rter: `github`, `gh`, `issue`, `pr`, `pull request`, `branch`, `commit`, `release`
- oder ein Muster wie `#<zahl>` bzw. `<owner>/<repo>#<zahl>`

Wenn **nichts** davon zutrifft: **nicht** aktiv werden.

# ğŸ› ï¸ Tool-PrioritÃ¤t
1) **github-mcp** (bevorzugt)  
2) **gh** (CLI) als Fallback â€“ keine manuellen Webaktionen oder Raw-API-Calls, solange MCP/gh reicht.

# ğŸ“¦ Repository-Default
- **Default-Repo:** `keeperxy/christianerben-eu`
- **Branches:**
  - `development` (Hauptentwicklung)
  - `main` (Cloudflare Production)
- **Branch-Flow:** feature â†’ `development` â†’ `main`

> Falls der Nutzer explizit ein anderes Repo nennt (URL oder `owner/repo`), **Ã¼berschreibe** den Default nur fÃ¼r die aktuelle Aktion.

# ğŸ”— Issue/PR-Referenzen
- `#123` â†’ bezieht sich auf das **Default-Repo** (oder aktuell gesetztes Repo).
- `<owner>/<repo>#123` â†’ Cross-Repo.
- Bei **Mehrdeutigkeit**:
  - Zuerst prÃ¼fen, ob **Issue** existiert.
  - Falls nicht, prÃ¼fen, ob **PR** existiert.
  - Wenn beides existiert, explizit nachfragen: *â€Meinst du Issue oder PR?â€œ*

Umsetzung (MCP oder Fallback `gh`):
- Issue anzeigen: `issue view <num>`
- PR anzeigen: `pr view <num>`

# ğŸŒ¿ Arbeiten mit Issues (Standard-Vorgehen)
Wenn Text zu einem Issue kommt (explizit oder via `#<num>`):
1) **Sync & Branch:**
   - von `development` aus starten (`git fetch`, `git checkout development`, `git pull`).
   - Feature-Branch: `issue-<num>-<kebab-kurzbeschreibung>`
2) **Lokale Implementierung:**
   - **NUR** lokale Ã„nderungen vornehmen (Code schreiben, testen)
   - **NICHT** committen, pushen oder PR erstellen ohne User-BestÃ¤tigung
3) **User-BestÃ¤tigung einholen:**
   - Ã„nderungen zeigen und um BestÃ¤tigung bitten
   - Warten auf explizites "OK", "passt", "committen" oder Ã¤hnliches
4) **Nach BestÃ¤tigung:**
   - Commits: Commit-Messages enthalten Referenz: `Fixes #<num>` (falls Bug/Feature abgeschlossen), sonst `Refs #<num>`.
   - PR: PR gegen `development` erstellen
   - Body enthÃ¤lt: Zweck, Testhinweise, `Fixes #<num>` (nur wenn schlieÃŸbar).
5) **Labels/Reviewer:** nur setzen, wenn vom Nutzer genannt oder Projektstandard vorhanden.

# ğŸ—ï¸ Build/Dev-Automatik (Bun)
- **Regel:** **Nach jedem** `bun run build` **unmittelbar** `bun run dev` starten.
- **Dev-Server-Lifecycle:**
  - Wenn **anschlieÃŸend weiterer Text** vom Nutzer kommt (z. B. â€passtâ€œ, â€bitte Ã¤ndern â€¦â€œ, â€alles okâ€œ), **beende** den Dev-Server.
  - **Starte** den Dev-Server **immer erneut**, sobald etwas anderes gemacht wird, **auÃŸer** es geht **nur** um PR-TÃ¤tigkeiten (Reviews, Rebase, Labels, Merge).
- **Umsetzungshinweise:**
  - Dev-Server im Hintergrund/integriert starten (Terminal-Job).  
  - Beenden standardmÃ¤ÃŸig via `SIGINT` (Ctrl-C) oder Prozess-Kill, je nach Umgebung.

# âš ï¸ User-BestÃ¤tigung erforderlich
**KRITISCH:** Vor jedem Commit/Push/PR **MUSS** User-BestÃ¤tigung eingeholt werden:
- **Lokale Ã„nderungen:** Nur Code schreiben und testen
- **Warten auf BestÃ¤tigung:** "OK", "passt", "committen", "pushen" etc.
- **Erst dann:** Commits, Push, PR erstellen
- **Nie automatisch:** Commits/Push/PR ohne explizite User-Freigabe

# ğŸ§ª Checks vor riskanten Aktionen
- Nie direkt auf `main` committen/mergen.
- Vor Branch-Wechsel: uncommitted changes sichern (stash) oder Nutzerhinweis.
- Kein `--force` Push ohne explizite Nutzerfreigabe.
- PR-Merge nur, wenn CI/Checks grÃ¼n (oder Nutzer wÃ¼nscht Override).

# ğŸ” Wenn unklar, kurz nachfragen
- Unklare Referenz (Issue vs. PR) oder unbekanntes Repo.
- Reviewer/Labels/Release-Tag gewÃ¼nscht?
- Breaking Changes / Migrationshinweise?

# ğŸ§° NÃ¼tzliche `gh` Befehle (Fallback)
```bash
# Issues & PRs
gh issue view <num> -R <owner>/<repo>
gh pr view <num> -R <owner>/<repo>
gh pr create --base development --head <branch> --title "<titel>" --body "<text>"

# Branch mgmt
git fetch
git checkout development && git pull
git checkout -b issue-<num>-<slug>

# Bun Workflow
bun run build
bun run dev
